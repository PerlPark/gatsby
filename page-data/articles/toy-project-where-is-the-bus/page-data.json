{"componentChunkName":"component---src-templates-article-js","path":"/articles/toy-project-where-is-the-bus/","webpackCompilationHash":"7e19da9ebfcf56e8e3ac","result":{"data":{"markdownRemark":{"html":"<p>포폴용으로 쓰기 위해 열심히 만들고 있는 프로젝트다. Nodejs, API는 이번 기회에 처음 사용해봤는데, 자바스크립트를 알고나니까 생각보다 낯설진 않았다. 하지만 이제 막 배워가면서 만들다보니 뭔가를 하나 만들면 오류도 하나 생겨서 디버깅에 시간을 엄청 쓰고있다. 코드도 정리되어야 할 부분이 너무 많다. ㅠㅠ 그래도 기본적으로 생각했던 기능들은 구현되어서 좀 정리를 해보려고 포스팅을 해 본다.</p>\n<h3>사용자 위치 좌표 조회</h3>\n<ol>\n<li>HTML5 Web API > geolocation API를 사용해서 사용자의 좌표를 조회한다.</li>\n<li>Kakao 지도 API로 좌표를 도로명 주소로 변환하여 출력한다.</li>\n<li>1번 과정에서 얻어낸 좌표는 localStorage에 저장된다. 화면이 갱신되면 API 응답 기다리는 동안 우선 출력하기 위함이다. </li>\n<li>폼 제출 시 좌표 값을 전달하기 위해, hidden 인풋(lat, lng)에도 좌표 값이 저장된다.</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 785px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e314a07c04e94d3455770c934673500b/5ca85/toy-project-where-is-the-bus-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.05095541401274%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA20lEQVQoz42SiQ6DIBBE+/8f2SY9vLhVxBp0urXSoPEieWElwyy76wUHaxiG1XhrXfaMgkHX9iPL81OGQRxfLK4W7Nb8z2LNqRcuhY30sMSeZtUwzu69h9EaZVnCGD3GmqiqEn2/Xf7cMMrsaSu4ABMCXCoIpZBkOZQx6OMH7JYcetN1gK2Bt5too5hoatK8Z3c2Sx53UcCxHDpLYbIEKnlCPB/EHSp9oaJvSDaraN/QKHSSw0lBcFjOiOKHYGMykObQEKEn36Y7C7TNhFtAv9A0GBwNJZgesTWUD206ZAUNyhr/AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"이미지\"\n        title=\"이미지\"\n        src=\"/static/e314a07c04e94d3455770c934673500b/5ca85/toy-project-where-is-the-bus-1.png\"\n        srcset=\"/static/e314a07c04e94d3455770c934673500b/de370/toy-project-where-is-the-bus-1.png 209w,\n/static/e314a07c04e94d3455770c934673500b/d854d/toy-project-where-is-the-bus-1.png 417w,\n/static/e314a07c04e94d3455770c934673500b/5ca85/toy-project-where-is-the-bus-1.png 785w\"\n        sizes=\"(max-width: 785px) 100vw, 785px\"\n        loading=\"eager\"\n      />\n  </a>\n    </span></p>\n<h3>실시간 노선 번호 검색</h3>\n<ol>\n<li>공공 API > 버스노선 조회 서비스 > 노선 번호 목록 조회를 이용했다.</li>\n<li>\n<p>키보드 누를 때마다 keyup 이벤트가 발생하여, 입력된 숫자로 시작하는 노선 목록을 출력해준다. 글자 수+1 길이의 노선까지 제공한다.</p>\n<ul>\n<li>예: 한 자리 수 ‘3’ 입력 시, 최대 두 자리 수 번호까지 제공 ‘3’, ’30’, ’31’ …</li>\n</ul>\n</li>\n<li>목록에서 노선을 선택하면, 인풋에 해당 내용이 반영되고 hidden 인풋(routeId, routeName)에도 값을 저장한다.</li>\n<li>\n<p>노선 번호 수정을 위해 인풋을 클릭하면, 지역 및 버스 유형 정보가 지워지고 노선 번호만 남게 했다.</p>\n<ul>\n<li>hidden 인풋 routeName의 value를 가져온다.</li>\n<li>수정에 용이하면서, 백스페이스 키를 누르면서 발생하는 keyup 이벤트를 줄이기 위함이다.</li>\n</ul>\n</li>\n<li>노선 목록이 4개 이상일 경우 스크롤 바를 제공하고, 3개 이하일 땐 개수만큼 select 태그의 높이를 조정했다.</li>\n</ol>\n<p><img src=\"/assets/7527853a0176e118fe39eeb78b78c786/toy-project-where-is-the-bus-2.gif\" alt=\"이미지\"></p>\n<h3>주변 정류장에서 선택된 노선의 도착 정보 제공</h3>\n<ol>\n<li>공공 API > 정류소 조회 서비스 > 주변 정류소 목록 조회, 공공 API > 버스 도착 정보 조회 서비스 > 버스 도착 정보 목록 조회를 이용했다.</li>\n<li>좌표 값 기준으로 주변 정류소 조회 후, 각 정류소에 대해 선택된 노선(routeId 비교)의 도착 정보를 조회하여 제공하는 방식이다.</li>\n<li>조회된 도착 정보는 res.render를 통해 pug 템플릿에 전달하고, pug 템플릿에서 데이터를 순회하며 리스트(li 태그)를 생성하도록 만들었다.</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 834px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d45292d86b8c845ee45fd4f8168cb9e3/edc24/toy-project-where-is-the-bus-3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 76.70011148272017%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAABFElEQVQ4y52T3W6CQBBG9/2fy6pX0kiTwoXemEiBhsifsIDzdXbrtkB0ETZMYMnkcGaWEbAsItL3W0s6+u+eLWGF6YtwzSXKtIbekR0qpuyapkGe50jTFG3bTlqKMcQkm2cFqesaVVVBSjkAPgILm93gQ7rg+95i+dSwKAqEYYgszfhUbqCu+49XDfvA4HzGer2B7/ngekHcRx2XC4j7OhsYRREcx4H36UHygaAsQWxNWbYMGDNwt3Pg+z4ahmigMlwKVP3bbLdw93tc41g1FcSmi0v+CgKsVm9457K/TycG3u0UdAkwSRK47geOhwMytoUpd47hK7M6yJljaKZkHB3/h+PcSUOT+Dt21d/oqejP8yPgD46XnYOenOM1AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"이미지\"\n        title=\"이미지\"\n        src=\"/static/d45292d86b8c845ee45fd4f8168cb9e3/1d25d/toy-project-where-is-the-bus-3.png\"\n        srcset=\"/static/d45292d86b8c845ee45fd4f8168cb9e3/de370/toy-project-where-is-the-bus-3.png 209w,\n/static/d45292d86b8c845ee45fd4f8168cb9e3/d854d/toy-project-where-is-the-bus-3.png 417w,\n/static/d45292d86b8c845ee45fd4f8168cb9e3/1d25d/toy-project-where-is-the-bus-3.png 834w,\n/static/d45292d86b8c845ee45fd4f8168cb9e3/be1b7/toy-project-where-is-the-bus-3.png 1251w,\n/static/d45292d86b8c845ee45fd4f8168cb9e3/202d9/toy-project-where-is-the-bus-3.png 1668w,\n/static/d45292d86b8c845ee45fd4f8168cb9e3/edc24/toy-project-where-is-the-bus-3.png 1794w\"\n        sizes=\"(max-width: 834px) 100vw, 834px\"\n        loading=\"eager\"\n      />\n  </a>\n    </span></p>\n<h3>오류 페이지 제공</h3>\n<ol>\n<li>주변에 정류장이 없을 경우 또는 주변 정류장에 선택한 노선이 운행하지 않을 경우 오류 페이지가 제공된다.</li>\n<li>catch를 통해 오류 케이스를 인식하고, 오류 메세지를 pug 템플릿에 전달했다.</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 834px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/956941a02706c84012ee0587aec9fd07/241f5/toy-project-where-is-the-bus-4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.92882991556091%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAyUlEQVQ4y8VS7Q6DIBDz/Z9Ug5os8o3QcWw4QsSvPzvTNLmr9Qp2OKgQwoc94LT/9UL7ne7ULD5aGrxGhXVdkxnN8vy2ofcey7KACw6l1DZ7bOicg45GUsoE+kA5vx85MkXNKPunhqW4RK0p+7Wma212pfa0uxtSNCnkdm4bhADnHIILWGvPN8wDEo9sxDxNmBLmxIwx9H2PYRiisfhj5PpSWri04VeF8GC7w8jEztl0nhnGmMTlz10b7xqWt00mBK11Ahm24lK9AQn2VjGw0u2GAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"이미지\"\n        title=\"이미지\"\n        src=\"/static/956941a02706c84012ee0587aec9fd07/1d25d/toy-project-where-is-the-bus-4.png\"\n        srcset=\"/static/956941a02706c84012ee0587aec9fd07/de370/toy-project-where-is-the-bus-4.png 209w,\n/static/956941a02706c84012ee0587aec9fd07/d854d/toy-project-where-is-the-bus-4.png 417w,\n/static/956941a02706c84012ee0587aec9fd07/1d25d/toy-project-where-is-the-bus-4.png 834w,\n/static/956941a02706c84012ee0587aec9fd07/be1b7/toy-project-where-is-the-bus-4.png 1251w,\n/static/956941a02706c84012ee0587aec9fd07/241f5/toy-project-where-is-the-bus-4.png 1658w\"\n        sizes=\"(max-width: 834px) 100vw, 834px\"\n        loading=\"eager\"\n      />\n  </a>\n    </span></p>\n<h3>맺음말</h3>\n<p>아직 도착정보 조회 페이지는 디자인도 못 입힌 상태고, 여러모로 더 디벨롭해야할 부분이 많다.<br>\n특히 노선 번호 선택 안 했을 때 폼 제출 막고 얼럿 메세지 띄우는 거 꼭 해야겠다. 만들다 보니 기획도 꼭 변경해야될 게 보여서 제대로 기획서도 만들 예정이다. 0.5 버전 목표로 구현되어야할 것, 1.0 버전으로 구현되어야 할 것으로 나누어서 작성해야겠다.<br>\n해야할 것도 많고 새벽까지 디버깅을 하지만 너무너무 재미있는 프로젝트다. 꼭 완성까지 달릴 수 있길 🤩</p>","frontmatter":{"title":"토이 프로젝트: 버스야 어디있니? 진행 상황 정리","date":"October 10, 2019"},"timeToRead":2}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/articles/toy-project-where-is-the-bus/","previous":{"frontmatter":{"title":"2019/10/17 TIL(Today I Learn) - 블로그 리뉴얼! IE CSS 이슈 해결하기, git branch 분리하기","slug":"/articles/2019-10-17-TIL/"}},"next":{"frontmatter":{"title":"Vanilla js / Ecma script / Typescript 자바스크립트를 둘러싼 명칭 이해하기!","slug":"/articles/understand-the-names-related-to-javascript/"}}}}}